<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>TaskFocusPrime - Edit Task</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- FullCalendar CSS -->
        <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/main.min.css' rel='stylesheet' />
        <!-- FullCalendar JS -->
        <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>
        <!-- Calendar Script -->
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth'
            });
            calendar.render();
        });
        </script>
        <!-- Form Validation -->
        <script>
            (() => {
            'use strict'

            const forms = document.querySelectorAll('.needs-validation')

            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }

                form.classList.add('was-validated')
                }, false)
            })
            })()
        </script>
        <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
            <symbol id="check-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </symbol>
            <symbol id="exclamation-triangle-fill" viewBox="0 0 16 16">
              <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </symbol>
            <symbol id="login-icon" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0z"/>
                <path fill-rule="evenodd" d="M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"/>
            </symbol>
            <symbol id="logout-icon" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"/>
                <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"/>
            </symbol>
        </svg>
        <style>
        /* Custom Styling for Cards and Calendar */
        .past-event {
            filter: blur(5px);
            opacity: 0.5;
        }
        #calendar-container {
            max-width: 100%;
            margin: 0 auto;
        }
        a.navbar-brand {
            font-family: 'Abril Fatface';
            background: linear-gradient(to bottom, #37DF2F, #37DF2F, #37DF2F, #DEF086, #DEF086, #DEF086);
            -webkit-text-fill-color: transparent;
            -webkit-background-clip: text;
        }
        input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
            color: rgba(var(--bs-warning-rgb), 0.7) !important;
        }
        input::-moz-placeholder, textarea::-moz-placeholder {
            color: rgba(var(--bs-warning-rgb), 0.7) !important;
        }
        input:-ms-input-placeholder, textarea::-ms-input-placeholder {
            color: rgba(var(--bs-warning-rgb), 0.7) !important;
        }
        input::placeholder, textarea::placeholder, input[value], #start-date, #due-date, input {
            color: rgba(var(--bs-warning-rgb), 0.7) !important;
        }
        </style>
    </head>

    <body data-bs-theme="dark" class="text-warning">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">TaskFocusPrime</a>
                <button class="btn btn-success navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        <div class="vr text-warning-emphasis p-0"></div>
                        <li class="nav-item">
                            <a class="nav-link" href="/dashboard">Dashboard</a>
                        </li>
                        <div class="vr text-warning-emphasis p-0"></div>
                        <li class="nav-item">
                            <a class="nav-link" href="/task/create">Task Creation</a>
                        </li>
                        <div class="vr text-warning-emphasis p-0"></div>
                        <li class="nav-item">
                            <a class="nav-link" href="/register">Register</a>
                        </li>
                        <div class="vr text-warning-emphasis p-0"></div>
                        <div>
                            {% if session['logged_in'] == True %}
                              <li class="nav-item"><a class="nav-link" href="/logout">Logout<svg class="bi bi-box-arrow-right p-1" width="30" height="30" fill="currentColor"><use xlink:href="#logout-icon"/></svg></a></li>
                            {% else %}
                              <li class="nav-item"><a class="nav-link" href="/login">Login<svg class="bi bi-box-arrow-in-right p-1" width="30" height="30" fill="currentColor"><use xlink:href="#login-icon"/></svg></a></li>
                            {% endif %}
                        </div>
                    </ul>
                </div>
            </div>
        </nav>

        <header class="p-5 text-center mb-3 row">
            <div class="col-md-1"></div>
            <div class="col-md-10">
                <div class="p-5 border border-warning-subtle bg-success-subtle rounded-3" style="box-shadow: 0 0 21px 7px rgba(102, 104, 0, 0.349)">
                    <h1 class="fw-light text-decoration-underline">Edit Task</h1>
                    <p class="fw-lighter fs-4">Make any necessary adjustments to your task.</p>
                </div>
            </div>
            <div class="col-md-1"></div>
        </header>

        <hr class="border-warning border-3 ms-3">

        <section>
            <div class="container-xxl mb-3 mt-5">
                <div class="row">
                    <!-- Left side: Task Overview and Forms -->
                    <div class="col-12 col-md-6 mb-4">
                        <form method="post" style="box-shadow: 0 0 21px 7px var(--bs-success-bg-subtle)" class="p-3 border border-success-subtle rounded bg-secondary-subtle needs-validation" novalidate>
                            <legend class="text-decoration-underline mb-3">Task Details</legend>
                            <div class="mb-3">
                                <label for="title" class="form-label text-success-emphasis">Task Title:</label>
                                <input type="text" class="form-control border border-warning-subtle" id="title" name="title" value="{{task.title}}" required>
                                <div class="valid-feedback mt-2">
                                    <div class="alert alert-success d-flex justify-content-center align-items-center" role="alert">
                                        <svg class="bi me-5" width="64" height="64" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                                        <div>
                                            Valid Entry!
                                        </div>
                                    </div>
                                </div>
                                <div class="invalid-feedback mt-2">
                                    <div class="alert alert-danger d-flex justify-content-center align-items-center" role="alert">
                                        <svg class="bi me-5" width="64" height="64" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                                        <div>
                                            Please enter the task's title
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="assigned_to" class="form-label text-success-emphasis">Assigned To:</label>
                                <input type="text" class="form-control border border-warning-subtle" id="assigned_to" name="assigned_to" value="{{task.assigned_to}}">
                            </div>
                            <div class="mb-3">
                                <label for="description" class="form-label text-success-emphasis">Description:</label>
                                <textarea class="form-control border border-warning-subtle" id="description" name="description" required>{{task.description}}</textarea>
                                <div class="valid-feedback mt-2">
                                    <div class="alert alert-success d-flex justify-content-center align-items-center" role="alert">
                                        <svg class="bi me-5" width="64" height="64" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                                        <div>
                                            Valid Entry!
                                        </div>
                                    </div>
                                </div>
                                <div class="invalid-feedback mt-2">
                                    <div class="alert alert-danger d-flex justify-content-center align-items-center" role="alert">
                                        <svg class="bi me-5" width="64" height="64" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                                        <div>
                                            Please enter the task's description
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="priority" class="form-label text-success-emphasis">Priority:</label>
                                <select class="form-select border border-warning-subtle" name="priority" id="priority">
                                    <option value="Low" {% if task.priority == 'Low' %}selected{% endif %}>Low</option>
                                    <option value="Medium" {% if task.priority == 'Medium' %}selected{% endif %}>Medium</option>
                                    <option value="High" {% if task.priority == 'High' %}selected{% endif %}>High</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="start-date" class="form-label text-success-emphasis">Start Date:</label>
                                <input type="date" class="form-control border border-warning-subtle" id="start_date" name="start_date" value="{{task.start_date}}" required>
                                <div class="valid-feedback mt-2">
                                    <div class="alert alert-success d-flex justify-content-center align-items-center" role="alert">
                                        <svg class="bi me-5" width="64" height="64" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                                        <div>
                                            Valid Entry!
                                        </div>
                                    </div>
                                </div>
                                <div class="invalid-feedback mt-2">
                                    <div class="alert alert-danger d-flex justify-content-center align-items-center" role="alert">
                                        <svg class="bi me-5" width="64" height="64" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                                        <div>
                                            Please enter a valid start date
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="due-date" class="form-label text-success-emphasis">Due Date:</label>
                                <input type="date" class="form-control border border-warning-subtle" id="due_date" name="due_date" value="{{task.due_date}}">
                            </div>
                            <div class="mb-3">
                                <label for="progress" class="form-label text-success-emphasis">Progress (%):</label>
                                <input type="number" class="form-control border border-warning-subtle" id="progress" name="progress" value="{{task.progress}}" min="0" max="100">
                            </div>
                            <div class="row mb-2">
                                <div class="col">
                                    <a href="{{url_for('dashboard')}}" class="btn btn-outline-danger w-100">Cancel</a>
                                </div>
                                <div class="col">
                                    <button type="submit" class="btn btn-outline-success w-100">Save Changes</button>
                                </div>
                            </div>
                        </form>
                        <script>
                            (() => {
                            'use strict'
                
                            const forms = document.querySelectorAll('.needs-validation')
                
                            Array.from(forms).forEach(form => {
                                form.addEventListener('submit', event => {
                                if (!form.checkValidity()) {
                                    event.preventDefault()
                                    event.stopPropagation()
                                }
                
                                form.classList.add('was-validated')
                                }, false)
                            })
                            })()
                        </script>
                    </div>
                    <!-- Right side: Full month interactive calendar -->
                    <div class="col-12 col-md-6 mb-4">
                        <div class="card border border-success-subtle bg-warning-subtle" style="box-shadow: 0 0 21px 7px var(--bs-success-bg-subtle)">
                            <div class="card-body text-light">
                                <div id='calendar-container'>
                                    <div id='calendar'></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <hr class="border-warning border-3 ms-3">

        <footer class="container-fluid my-3">
            <div class="row text-center align-items-center">
                <div class="p-2 col">
                    <div class="row text-center">
                        <!-- Microsoft Teams -->
                        <div class="p-2 col">
                            <button class="btn p-3 rounded-circle bg-secondary-subtle" style="box-shadow: 0 0 21px 21px var(--bs-success-bg-subtle)" type="button">
                                <svg class="bi bi-microsoft-teams" width="48" height="48" fill="currentColor"><use xlink:href="#teams"/></svg>
                            </button>
                        </div>
                        <!-- Discord -->
                        <div class="p-2 col">
                            <button class="btn p-3 rounded-circle bg-secondary-subtle" style="box-shadow: 0 0 21px 21px var(--bs-success-bg-subtle)" type="button">
                                <svg class="bi bi-discord" width="48" height="48" fill="currentColor"><use xlink:href="#discord"/></svg>
                            </button>
                        </div>
                        <!-- Slack -->
                        <div class="p-2 col">
                            <button class="btn p-3 rounded-circle bg-secondary-subtle" style="box-shadow: 0 0 21px 21px var(--bs-success-bg-subtle)" type="button">
                                <svg class="bi bi-slack" width="48" height="48" fill="currentColor"><use xlink:href="#slack"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <img src="{{ url_for('static', filename='TaskFocusPrime.png') }}" alt="TaskFocusPrime" width="144" style="box-shadow: 0 0 21px 7px var(--bs-success-bg-subtle)">
                </div>
                <div class="p-2 col">
                    <div class="row text-center">
                        <!-- Dropbox -->
                        <div class="p-2 col">
                            <button class="btn p-3 rounded-circle bg-secondary-subtle" style="box-shadow: 0 0 21px 21px var(--bs-success-bg-subtle)" type="button">
                                <svg class="bi bi-dropbox" width="48" height="48" fill="currentColor"><use xlink:href="#dropbox"/></svg>
                            </button>
                        </div>
                        <!-- Google -->
                        <div class="p-2 col">
                            <button class="btn p-3 rounded-circle bg-secondary-subtle" style="box-shadow: 0 0 21px 21px var(--bs-success-bg-subtle)" type="button">
                                <svg class="bi bi-google" width="48" height="48" fill="currentColor"><use xlink:href="#google"/></svg>
                            </button>
                        </div>
                        <!-- GitHub -->
                        <div class="p-2 col">
                            <button class="btn p-3 rounded-circle bg-secondary-subtle" style="box-shadow: 0 0 21px 21px var(--bs-success-bg-subtle)" type="button">
                                <svg class="bi bi-github" width="48" height="48" fill="currentColor"><use xlink:href="#github"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>